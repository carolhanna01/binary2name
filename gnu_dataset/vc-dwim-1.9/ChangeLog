2019-12-23  Jim Meyering  <meyering@fb.com>

	version 1.9
	* NEWS: Record release date.

	build: update gnulib to latest

2019-12-19  Jim Meyering  <meyering@fb.com>

	doc: tell how to submit patches
	* README-hacking (Submitting patches): New section, mostly
	copied from coreutils.

2019-12-18  Karl Berry  <karl@freefriends.org>

	vc-dwim: dry-run for default action.
	* vc-dwim.pl (get_diffs): print @cmd and return empty list if $dry_run.
	(get_new_changeLog_lines): return early with empty list if $dry_run.
	(main): exit 0 early if $dry_run.

2019-12-08  Jim Meyering  <meyering@fb.com>

	gnulib: update to latest; also sync bootstrap and init.sh
	* gnulib: Update.
	* bootstrap: Update.
	* tests/init.sh: Update.

2019-12-06  Jim Meyering  <meyering@fb.com>

	maint: enable running from srcdir prior to make install
	Running ./vc-dwim would fail when run pre-"make-install".  Of course,
	one could inspect the source or tests and find the trick of setting the
	perllibdir envvar, but one should not have to do that.
	* vc-dwim.pl (BEGIN): Prepend dirname $0 to @INC.
	This also makes it so a manual post-install test uses .pm files
	from the current directory rather than the installed ones.
	* Makefile.am (install-exec-hook): Upon installation, remove the line
	that prepends basename $0 to @INC
	Reported by Karl Berry.

	vc-dwim: fix --dry-run nit
	* vc-dwim.pl (main): Avoid a TOCTOU race that (upon losing)
	could make us rename $cl to $cl~ in spite of --dry-run.

	maint: use AM_V_GEN
	* man/Makefile.am ($(srcdir)/vc-dwim.1): Use AM_V_GEN.
	($(srcdir)/vc-chlog.1): Likewise.

	tests: avoid vc-chlog test failure on OS X
	* vc-chlog.in (email_address): Handle lack of domainname, and
	fall back to using "unknown_domain" when the last-resort
	hostname -d fails.

2019-11-30  Karl Berry  <karl@freefriends.org>

	tests: skip git worktree test if worktree not supported
	* tests/git-worktree: Skip test if git worktree --help fails.

	doc: Document vc-dwim --initialize in manual.
	* vc-dwim.pl: reword --initialize documentation.
	* doc/vc-dwim.texi (Initializing vc-dwim): new node.
	(vc-dwim Invocation): mention --initialize; move most of
	description to new node.

	doc: Small documentation changes.
	* vc-dwim.pl: add conventional urls for home page and general
	GNU help at end.
	* doc/vc-dwim.texi (Introduction):
	(Reporting bugs): omit trivial cindex entries (not printed); wording.
	(vc-dwim Invocation): less dogmatic about other editors.
	(Using vc-chlog): subheadings to break up long node, other wording.
	(vc-chlog Invocation) <--debug>: more.
	(vc-chlog Internals): grammar.

	vc-dwim: New option vc-dwim --dry-run (aka -n).
	* vc-dwim.pl ($dry_run): new variable.
	(GetOptions): set it.
	(run_command): conditionalize system call and INHIBIT_STDOUT.
	(main): conditionalize initialize operations, rename, symlink.
	* doc/vc-dwim.texi (vc-dwim Invocation): document it.
	* NEWS (New features): Mention it.

2019-01-01  Jim Meyering  <meyering@fb.com>

	maint: update all copyright dates via "make update-copyright"
	* gnulib: Also update submodule for its copyright updates.

	build: make the autoconf-2.63 requirement explicit
	* configure.ac: AC_PREREQ: Require 2.63, not 2.59. And quote properly.
	Autoconf-2.63 has been required for some time via gnulib.
	This merely makes it explicit.

2018-10-13  Jim Meyering  <meyering@fb.com>

	build: update gnulib to latest; also update bootstrap and init.sh

2018-02-25  Jim Meyering  <meyering@fb.com>

	doc: really replace http:// with https:// everywhere
	Induce this change by running this command:
	  git grep -l http://|xargs perl -pi -e 's,\bhttp://,https://,g'
	* COPYING: As above.
	* ChangeLog-2011: Likewise.
	* Coda.pm: Likewise.
	* cfg.mk: Likewise.
	* doc/vc-dwim.texi: Likewise.

2018-02-16  Jim Meyering  <meyering@fb.com>

	vc-dwim: port to 5.x that don't automatically use Cwd
	* vc-dwim.pl (do_at): "use Cwd" here, too.
	Otherwise, "vc-dwim --init" would fail at least with perl v5.16.3.
	The new use of do_at exposed that this function used the Cwd module
	without first ensuring that it is available.

2018-02-15  Jim Meyering  <meyering@fb.com>

	doc: replace http:// with https:// everywhere
	Induce this change by running this command:
	git grep -l 'http://www\.gnu\.org/licenses' \
	  |xargs perl -pi -e 's,\bhttp(://www\.gnu\.org/licenses)\b,https$1,'

	doc: sync README-hacking from sed
	* README-hacking: Update.

2018-02-04  Jim Meyering  <meyering@fb.com>

	vc-dwim: also work with a git worktree
	* vc-dwim.pl (admin_dir): Also handle the case in which .git
	is a file, as it is for a git worktree.
	* tests/git-worktree: New file.
	* tests/Makefile.am (TESTS): Add it.
	* NEWS: Mention the fix.

	vc-dwim: do not assume admin dir is two levels below cwd
	* vc-dwim.pl (main): Do not assume that the admin directory is an entry
	in the current directory.  Instead of manually changing into the admin
	directory and running commands, use the "do_at" function to do the work
	and restore the working directory, so we can properly create the link
	to $adm/c/ChangeLog.  This is required for git worktree support.

2018-02-04  Oleg Pykhalov  <go.wigust@gmail.com>

	VC.pm: also work in a git "worktree"
	* VC.pm (new): Also accept a ".git" file, which is what you
	get in a git worktree.

2018-01-06  Jim Meyering  <meyering@fb.com>

	maint: update gnulib and copyright dates for 2018
	* gnulib: Update to latest.
	* all files: Run "make update-copyright".
	* bootstrap: Update from gnulib.

2017-05-13  Jim Meyering  <meyering@fb.com>

	gnulib: update to latest; also update bootstrap and init.sh

2017-01-14  Jim Meyering  <meyering@fb.com>

	maint: post-release administrivia
	* NEWS: Add header line for next release.
	* .prev-version: Record previous version.
	* cfg.mk (old_NEWS_hash): Auto-update.

	version 1.8
	* NEWS: Record release date.

	maint: tweak s/time stamp/timestamp/ to avoid syntax-check failure
	* tests/subdir-cvs: Change spelling to accommodate.

	gnulib: update to latest; and init.sh and bootstrap
	* gnulib: Update to latest.
	* bootstrap: Update from gnulib.
	* tests/init.sh: Update from gnulib.

2017-01-01  Jim Meyering  <meyering@fb.com>

	maint: update gnulib and copyright dates for 2017
	* gnulib: Update to latest.
	* all files: Run "make update-copyright".

2016-10-02  Jim Meyering  <meyering@fb.com>

	gnulib: update to latest

2016-03-15  Jim Meyering  <meyering@fb.com>

	maint: don't ignore gitlog-to-changelog failure
	* Makefile.am (gen-ChangeLog): Don't ignore failure of
	gitlog-to-changelog. This syncs to coreutils' copy of this rule.

2016-02-15  Jim Meyering  <meyering@fb.com>

	doc: reference bug-reporting address from texinfo documentation
	* doc/vc-dwim.texi (Reporting Bugs): New section.
	Reported by Dave Love.

2016-01-01  Jim Meyering  <meyering@fb.com>

	maint: update copyright year, bootstrap, init.sh
	Run "make update-copyright" and then...

	* gnulib: Update to latest.
	* tests/init.sh: Sync with gnulib to pick up copyright year.
	* bootstrap: Likewise.

2016-01-01  Jim Meyering  <meyering@fb.com>

	vc-dwim: port to perl5.22.1
	* vc-dwim.pl (run_command): Use *SAVE_ERR and *SAVE_OUT
	consistently, to avoid new errors from perl5.22.1.

2015-07-30  Assaf Gordon  <assafgordon@gmail.com>

	vc-dwim: silently ignore dirty git submodules
	* NEWS: mention it.
	* VC.pm: ignore git submodules.
	* tests/ignore-dirty-submodules: new file.
	* tests/Makefile.am (TESTS): add it.
	Discussed in http://bugs.gnu.org/21120

2015-04-18  Jim Meyering  <meyering@fb.com>

	maint: tweak header texinfo to avoid "make distcheck" failure
	* doc/vc-dwim.texi: Update, removing cruft that
	was making this fail to compile.

	maint: update from gnulib
	* gnulib: Update submodule to latest.
	* bootstrap: Update from gnulib.
	* trests/init.sh: Likewise.

	vc-dwim: new option: --initialize
	* NEWS: Mention it.
	* vc-dwim.pl: Implement it.
	* tests/initialize: New file.
	* tests/Makefile.am (TESTS): Add it.
	Paul Eggert suggested to add this option
	in http://bugs.gnu.org/20341

2015-01-01  Jim Meyering  <meyering@fb.com>

	maint: update copyright year ranges to include 2015; update gnulib
	* bootstrap: Also, update this file from gnulib.

2013-04-03  Dave Love  <fx@gnu.org>

	vc-dwim: add support for darcs
	* VC.pm: Support darcs.
	* NEWS: Mention darcs.
	* README: Likewise.
	* bootstrap.conf (buildreq): Likewise.
	* doc/vc-dwim.texi: Likewise.

2013-03-15  Jim Meyering  <meyering@fb.com>

	maint: post-release administrivia
	* NEWS: Add header line for next release.
	* .prev-version: Record previous version.
	* cfg.mk (old_NEWS_hash): Auto-update.

	version 1.7
	* NEWS: Record release date.

	build: update gnulib submodule to latest; and bootstrap

2013-01-04  Jim Meyering  <jim@meyering.net>

	build: update gnulib submodule to latest

	maint: update all copyright year number ranges
	Run "make update-copyright".

2012-07-21  Jim Meyering  <meyering@redhat.com>

	maint: update .gitignore
	* .gitignore: Add /tests/*.trs and /doc/vc-dwim.t2d to accommodate
	newer automake.  Remove now unneeded /vc-dwim-[.1-9]*.tar.gz{,.sig}.

	build: update gnulib, bootstrap and init.sh

2012-04-28  Jim Meyering  <meyering@redhat.com>

	tests: author-bzr: don't fail when no author name/email is set
	* tests/author-bzr: Invoke bzr whoami to set author name/email.

	build: tell bootstrap to check build/test requirements
	* bootstrap.conf (buildreq): List build/test requirements.

2012-04-21  Jim Meyering  <meyering@redhat.com>

	build: update gnulib submodule to latest

	vc-dwim: use --author= internally also with bzr as well as with git
	* VC.pm (author): New method.
	($vc_cmd) [AUTHOR_FMT]: New key/val, defined for GIT and BZR.
	* vc-dwim.pl (do_commit): Generalize --author=...-using code to
	work with BZR as well.
	* tests/author-bzr: New test, derived from tests/author.
	* tests/Makefile.am (TESTS): Add it.
	* NEWS (Bug fixes): Mention the fix.
	Reported by Paul Eggert.

2012-04-04  Jim Meyering  <meyering@redhat.com>

	tests: avoid spurious failure of symlinked-changelog
	* tests/symlinked-changelog: Define git's user.name and
	user.email, so that git commit does not fail.

2012-01-25  Jim Meyering  <meyering@redhat.com>

	tests: accommodate upcoming automake-1.12
	* tests/check.mk (TESTS_ENVIRONMENT): Adjust to work with
	upcoming automake-1.12.
	* tests/dirty-workdir: Set executable bit.

	build: update bootstrap and init.sh from gnulib
	* bootstrap: Update.
	* tests/init.sh: Update.

2012-01-01  Jim Meyering  <meyering@redhat.com>

	maint: update all copyright year number ranges
	Run "make update-copyright".

2011-12-23  Jim Meyering  <meyering@redhat.com>

	maint: adjust the URL that will appear in the generated announcement
	* cfg.mk (url_dir_list): Use this http://ftp.gnu.org/gnu/$(PACKAGE)
	for the first link listed in the generated announcement.
	announce-gen now provides the faster mirror link automatically.

	maint: post-release administrivia
	* NEWS: Add header line for next release.
	* .prev-version: Record previous version.
	* cfg.mk (old_NEWS_hash): Auto-update.

	version 1.6
	* NEWS: Record release date.

	doc: substitute $package for @PACKAGE@ in README-release
	* bootstrap.conf (bootstrap_epilogue): Define, to substitute
	$package for @PACKAGE@ in README-release.  I should have done
	this back on 2011-05-20, with commit bf0c3de9.

	vc-chlog: run finger only as a last resort, as intended
	* vc-chlog.in (user_name): Fix an omission that made nearly every
	invocation of vc-chlog run "finger $USER" unnecessarily.

	test: update init.sh from gnulib
	* tests/init.sh: Update from gnulib.

2011-12-22  Jim Meyering  <meyering@redhat.com>

	build/test: update init.sh and bootstrap from gnulib
	* bootstrap: Update from gnulib.
	* tests/init.sh: Likewise.

2011-12-18  Jim Meyering  <meyering@redhat.com>

	doc: mention the new warning in NEWS
	* NEWS (Changes in behavior): Mention the new warning.

	tests: use "compare exp out", not "compare out exp"
	* tests/add-empty: Reverse arguments.
	* tests/cl-but-no-diff: Likewise.
	* tests/cl-other-user: Likewise.
	* tests/git-mv: Likewise.
	* tests/leading-comment: Likewise.
	* tests/no-star: Likewise.
	* tests/no-vc: Likewise.
	* tests/symlinked-changelog: Likewise.
	* tests/two-line-attr: Likewise.
	* tests/two-vc: Likewise.

	build: update gnulib submodule to latest

	vc-dwim: warn when there is no one-line summary
	* vc-dwim.pl (main): Emit a warning when the first line of the log
	starts with "* ".  Suggested by Reuben Thomas.
	* tests/subdir: Adapt to new behavior by adding a one-line summary.
	* tests/subdir-middle: Likewise.
	* tests/subdir-cvs: Test for the new diagnostic.

2011-11-03  Jim Meyering  <meyering@redhat.com>

	build: don't bother distributing gzip'd tarballs anymore; xz is enough
	* configure.ac (AM_INIT_AUTOMAKE): Add no-dist-gzip.

2011-10-03  Jim Meyering  <meyering@redhat.com>

	doc: mention this vc-dwim-vs-GIT_EXTERNAL_DIFF fix
	* NEWS (Bug fixes): Mention this fix.

	vc-dwim: accommodate those who set GIT_EXTERNAL_DIFF
	* vc-dwim.pl (main): If the GIT_EXTERNAL_DIFF envvar is set, arrange
	to run "git diff --no-ext-diff ..." to produce internally-consumed
	diff output and "git diff ..." for diff output that is output.
	This means that if you set GIT_EXTERNAL_DIFF, vc-dwim must run
	git-diff twice in some modes: once for the output it consumes and
	a second time for the diff output it prints.
	* VC.pm (diff_pristine): New method.
	($vc_cmd->GIT): Define its DIFF_PRISTINE member.
	(diff_is_pristine): New method.
	Reported by Bruno Haible.

	tests: don't let GIT_EXTERNAL_DIFF induce spurious test failures
	* tests/init.cfg (require_git_): Protect against any setting of
	the GIT_EXTERNAL_DIFF envvar.

	tests: update init.sh from gnulib; clean up tests
	* tests/init.sh: Update from gnulib.
	* tests/add-empty: Use compare, not cmp.
	* tests/cl-but-no-diff: Likewise.
	* tests/dirty-workdir: Likewise.
	* tests/git-mv: Likewise.
	* tests/no-star: Likewise.
	* tests/no-vc: Likewise.
	* tests/subdir: Likewise.
	* tests/subdir-cvs: Likewise.
	* tests/subdir-middle: Likewise.
	* tests/symlinked-changelog: Likewise.
	* tests/two-vc: Likewise.
	* tests/cl-other-user: Likewise.
	* tests/leading-comment: Likewise.
	* tests/two-line-attr: Likewise.

	vc-dwim: do actually remove blank-empty lines
	* vc-dwim.pl (get_diffs): Replace a no-op loop with one that
	actually does what the comments said.

	maint: vc-dwim: remove an unused statement
	* vc-dwim.pl (main): Remove unused local.

2011-06-13  Jim Meyering  <meyering@redhat.com>

	vc-dwim: fix a bug that made the 2011-05-31 change incomplete
	* vc-dwim.pl (main): Include the trailing ":" or ")" in $1.
	Without that matching ")", the changelog entry parser would
	fail to remove a parenthesized list of functions, and would
	interpret the first of two or more function names as a file name.
	Reported by Paul Eggert.
	* tests/cl-syntax: Use two functions in the parenthesized list,
	to trigger this new bug.

2011-05-31  Jim Meyering  <meyering@redhat.com>

	tests: add a test to exercise a ChangeLog syntax bug
	* tests/cl-syntax: New script. Test for the bug reported by Paul Eggert
	in https://lists.gnu.org/archive/html/bug-vc-dwim/2011-05/msg00006.html
	* tests/Makefile.am (TESTS): Add cl-syntax.

	vc-dwim: relax file-spec ChangeLog regexp to accommodate new GCS-style
	* vc-dwim.pl (main): Relax the file-spec matching regexp.  Before,
	the regexp was /^\* (\S.*?):/, while now we also allow a line
	ending in ")": /^\* (\S.*?)(:|\)$)/
	* NEWS (Bug fixes): Mention it.

	vc-dwim: avoid unfounded failure with two ChangeLog file arguments
	* vc-dwim.pl (check_attribution): Also sanitize the author parameter.
	Otherwise, "vc-dwim a/ChangeLog b/ChangeLog" would fail complaining
	about mismatch between "name <email>" and "name  <email>".
	* NEWS (Bug fixes): Mention it.

2011-05-19  Jim Meyering  <meyering@redhat.com>

	update gnulib and use gnulib's readme-release module
	* bootstrap.conf (gnulib_modules): Add readme-release.
	* README-release: Remove file.
	* .gitignore: Ignore .sig files, too.  Fix tarball regexp.

	build: update gnulib submodule to latest

	post-release administrivia
	* NEWS: Add header line for next release.
	* .prev-version: Record previous version.
	* cfg.mk (old_NEWS_hash): Auto-update.

	version 1.5
	* NEWS: Record release date.

2011-05-05  Jim Meyering  <meyering@redhat.com>

	tests: test for the ChangeLog-header-in-commit-log bug
	* tests/changelog-header-at-end-of-log: Test for the bug whereby
	a ChangeLog header is inserted at the end of a commit log.
	This would happen when the latest ChangeLog entry has exactly
	the same header as the previous ChangeLog header and the diff
	output includes the first header and following blank line
	only as context.
	* tests/Makefile.am (TESTS): Add it.

	vc-dwim: don't include a ChangeLog header in the commit log
	* NEWS (Bug fixes): Mention it.
	* vc-dwim.pl (main): Recognize and omit the offending lines
	from @log_lines.

2011-05-04  Jim Meyering  <meyering@redhat.com>

	tests: update to use gnulib's init.sh
	* tests/init.sh: New file, from gnulib.
	* tests/init.cfg: New file.  Most content from trap-setup.
	* tests/trap-setup: Remove file.  Subsumed by init.sh and init.cfg.
	* tests/Makefile.am (EXTRA_DIST): Add init.cfg, init.sh.
	Remove trap-setup
	* tests/no-vc: Use init.sh, not trap-setup.  Adjust.
	* tests/cl-but-no-diff: Likewise.
	* tests/cl-other-user: Likewise.
	* tests/no-star: Likewise.
	* tests/leading-comment: Likewise.
	* tests/subdir-middle: Likewise.
	* tests/subdir: Likewise.
	* tests/two-line-attr: Likewise.
	* tests/git-log-summary: Likewise.
	* tests/git-mv: Likewise.
	* tests/two-vc: Likewise.
	* tests/add-empty: Likewise.
	* tests/scalar: Likewise.
	* tests/author: Likewise.
	* tests/dirty-workdir: Likewise.
	* tests/subdir-cvs: Likewise.
	* tests/symlinked-changelog: Likewise.
	* tests/multiple-chlogs: Likewise.
	* tests/t-vc-chlog: Likewise.

2011-04-18  Jim Meyering  <meyering@redhat.com>

	doc: tweak sample find|sed pipeline for cleaner .vc-chlogrc
	* doc/vc-dwim.texi (Using vc-chlog): Tweak the example showing
	what how to generate multiple --changelog lines so as to omit
	the leading "./" on each file name.

2011-03-18  Jim Meyering  <meyering@redhat.com>

	post-release administrivia
	* NEWS: Add header line for next release.
	* .prev-version: Record previous version.
	* cfg.mk (old_NEWS_hash): Auto-update.

	version 1.4
	* NEWS: Record release date.

	maint: avoid new syntax-check failure
	* tests/dirty-workdir: Remove empty line at EOF.

	maint: document release procedure
	* README-release: New file.

2011-03-17  Jim Meyering  <meyering@redhat.com>

	doc: set manual_title, for gnu-web-doc-update
	* cfg.mk (manual_title): Define.  This is required by
	the build-aux/gnu-web-doc-update script we use to update
	the on-line web documentation.

2011-03-16  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	vc-chlog: new option --dirty-workdir for git add --interactive.
	With 'git add -i', it can be helpful to pipe the output of
	'git diff --cached' into 'vc-chlog --stdin'.  However, if the
	working directory also contains unrelated changes, then the tag
	list might be wrong, because we try to recreate the old version
	of the file from the copy in the working directory.  With the
	new --dirty-workdir options, use 'vc-dwim --diff' to get back to
	the state of the last commit.  From there, recreate the version
	of the new file with the patch from stdin.

	* vc-chlog.in: New option --dirty-workdir.
	(func_help): Document it.
	(func_extract_identifiers): If the work directory is dirty,
	recreate the old file from 'vc-dwim --diff' rather than from the
	patch in question; also, create a version of the new file based
	on that plus the patch in question.
	* doc/vc-dwim.texi (vc-chlog Invocation): Document the option.
	* tests/dirty-workdir: Use it.
	* tests/Makefile.am (XFAIL_TESTS): Remove dirty-workdir.
	* NEWS: Update.

2011-03-12  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	New xfailing test: vc-chlog --stdin with dirty workdir.
	* tests/dirty-workdir: New test.
	* tests/Makefile.am (TESTS, XFAIL_TESTS): Update.

	vc-chlog: refactor tag list creation, for next change.
	* vc-chlog.in (wd): New global.
	(func_diff_for_file, func_apply_tmp_patch): New helper
	functions.
	(func_recreate_oldfile): Remove, now folded back into ...
	(func_extract_identifiers): ... this, and reorganized a bit.

2011-03-09  Jim Meyering  <meyering@redhat.com>

	update from gnulib
	* bootstrap: Update from gnulib
	* gnulib: Update submodule to latest.

	don't version-control ChangeLog.  instead, generate it into tarball
	* Makefile.am (gen-ChangeLog): New target.
	(dist-hook): Depend on it.
	* ChangeLog-2011: Rename from ChangeLog.
	* ChangeLog: Remove file.
	* .gitignore: Ignore more.
