<html lang="en">
<head>
<title>Running 3DLDF - 3DLDF User and Reference Manual</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="3DLDF User and Reference Manual">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Installing-and-Running-3DLDF.html#Installing-and-Running-3DLDF" title="Installing and Running 3DLDF">
<link rel="prev" href="Installing-3DLDF.html#Installing-3DLDF" title="Installing 3DLDF">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This is the 3DLDF User and Reference Manual, edition 1.1.5.1 for
3DLDF 1.1.5.1.
This manual was last updated on
16 January 2004.

3DLDF is a GNU package for three-dimensional drawing with MetaPost
output.
The author is Laurence D. Finston.

Copyright (C) 2003, 2004 , 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013 The Free Software Foundation

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.2 or any later version published by the Free Software
     Foundation; with no Invariant Sections, no Front-Cover Texts, and
     no Back-Cover Texts.  A copy of the license is included in the
     section entitled ``GNU Free Documentation License''.
   -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="Running-3DLDF"></a>
<p>
Previous:&nbsp;<a rel="previous" accesskey="p" href="Installing-3DLDF.html#Installing-3DLDF">Installing 3DLDF</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Installing-and-Running-3DLDF.html#Installing-and-Running-3DLDF">Installing and Running 3DLDF</a>
<hr>
</div>

<h3 class="section">11.2 Running 3DLDF</h3>

<p>To use 3DLDF, call
<samp><span class="command">make run</span></samp> from the command line in the
shell.  The working directory should be
<samp><span class="file">3DLDF-1.1.5.1/</span></samp> or <samp><span class="file">3DLDF-1.1.5.1/CWEB</span></samp>. 
Either will work, but the latter may be more convenient, because
this is the location of the CWEB, TeX and MetaPost files that you'll
be editing. 
Alternatively, call <samp><span class="command">ldfr</span></samp>, which is merely a
shell script that calls <samp><span class="command">make run</span></samp>. 
This takes care of running <samp><span class="command">3dldf</span></samp>, MetaPost, TeX,
and <samp><span class="command">dvips</span></samp>, producing a PostScript file containing your
drawings.  You can display the latter on your terminal using Ghostview
or some other
PostScript viewer, print it out, and whatever else you like to do with
PostScript files.

   <p>However, you can also perform the actions performed by
<samp><span class="command">make run</span></samp> by hand, by writing your own shell
scripts, by defining Emacs-Lisp commands, or in other ways.  Even if you
choose to use <samp><span class="command">make run</span></samp>, it's important to understand what it
does.  The following explains how to do this by hand.

   <p>The CWEB source files for 3DLDF are in the subdirectory
<samp><span class="file">3DLDF-1.1.5.1/CWEB/</span></samp>.  They
must be <samp><span class="command">ctangled</span></samp>, and the resulting C++
 files must be
compiled and
linked, in order to create the executable file <samp><span class="file">3dldf</span></samp>. 
The C++
 files and header files generated by <samp><span class="command">ctangle</span></samp>,
the object files generated by the compiler, and the executable
<samp><span class="file">3dldf</span></samp> all  reside in <samp><span class="file">3DLDF-1.1.5.1/CWEB/</span></samp>. Therefore, the
latter must be your working directory.

   <p>Since 3DLDF has no input routine as yet,
as explained in <a href="No-Input-Routine.html#No-Input-Routine">No Input Routine</a>,
it is necessary to add C++
 code to the function <code>main()</code> in
<samp><span class="file">main.web</span></samp>, and/or in a separate function in another file.  In the
latter case, the function containing the user code must be invoked in
<code>main()</code>.  Look for the line &ldquo;Your code here!&rdquo; in
<samp><span class="file">main.web</span></samp>.

   <p>This is an example of what you could write in <code>main()</code>. 
Feel free to make it more complicated, if you wish.

<pre class="example">     beginfig(1);
     default_focus.set(2, 3, -10, 2, 3, 10, 20);
     Rectangle R(origin, 5, 3);
     Circle C(origin, 3, 90);
     C.half(180).filldraw(black, light_gray);
     R.filldraw();
     C.half().filldraw(black, light_gray);
     Point p = C.get_point(4);
     p.shift(0, -.5 * p.get_y());
     p.label("$C$", "");
     Point q = R.get_mid_point(0);
     q.shift(0, 0, -.5 * q.get_z());
     q.label("$R$", "");
     current_picture.output(default_focus, PERSP, 1, NO_SORT);
     endfig(1);
</pre>
   <p><p align="center">
<br>
<img src="./graphics/png/3DLDF72.png"
alt="[Figure 72. Not displayed.]" 
/>
<br>
<br>
Fig. 72. 
<br>
</p>

     <ol type=1 start=1>
<li>Save <samp><span class="file">main.web</span></samp>, and any other CWEB files you've changed. 
Since these files have changed, they must be <samp><span class="command">ctangled</span></samp>, and the
resulting C++
 files must be recompiled.  If you've changed any files
other than
<samp><span class="file">main.web</span></samp>, <samp><span class="command">ctangle</span></samp> will also generate a header
file for each of these files.  If a header file differs from the version
that existed before <samp><span class="command">ctangle</span></samp> was run, all of the C++
 files
that depend on it must be recompiled.  Then <samp><span class="file">3dldf</span></samp> must be
relinked.  To do this, call <samp><span class="command">make 3dldf</span></samp> from the command line.

     <p>If you've made any errors in typing your code, the
compiler should have issued error messages, so go back into
the appropriate CWEB file and correct your errors.  Then call
<samp><span class="command">make 3dldf</span></samp> again.

     <li>Call <samp><span class="command">CWEB/3dldf</span></samp> at the command line.  It writes a
file of MetaPost code called <samp><span class="file">3DLDFput.mp</span></samp>.

     <li>Run MetaPost on the file <samp><span class="file">3DLDFmp.mp</span></samp>, which inputs
<samp><span class="file">3DLDFput.mp</span></samp>.

     <pre class="example">          mpost 3DLDFput
</pre>
     <p class="noindent">The result is an Encapsulated PostScript file
<samp><span class="file">3DLDFput.</span></samp>&lt;<i>integer</i>&gt; for each figure in your drawing.

     <li>The file <samp><span class="file">3DLDFtex.tex</span></samp> should contain code for including the
<samp><span class="file">3DLDFput.</span></samp>&lt;<i>integer</i>&gt; files.  This is an example taken from
the <samp><span class="file">3DLDFtex.tex</span></samp> included in the distribution. 
You may change it to suit your purposes.

     <pre class="example">          \vbox to \vsize{\vskip 2cm
          \line{\hskip 2cm Figure 1.\hss}%
          \vfil
          \line{\hskip 2cm\epsffile{3DLDFmp.1}\hss}%
          \vss}
</pre>
     <li>Run TeX on <samp><span class="file">3DLDFtex.tex</span></samp> to produce the DVI file,
<samp><span class="file">3DLDFtex.dvi</span></samp>.

     <pre class="example">          tex 3DLDFtex
</pre>
     <li>Run <samp><span class="command">dvips</span></samp> on the DVI file to produce the PostScript file,
<samp><span class="file">3DLDFtex.ps</span></samp>.

     <pre class="example">          dvips -o 3DLDFtex.ps 3DLDFtex
</pre>
     <li><samp><span class="file">3DLDFtex.ps</span></samp> can be viewed using Ghostview, it can be printed using
<samp><span class="command">lpr</span></samp> (on a Unix-like system),  you can convert it to PDF with
<code>ps2pdf</code>, or to some other format using the appropriate program.
        </ol>

   <p>I sincerely hope that it worked.  If it didn't, ask your local computer
wizard for help.

   <p>On the computer I'm using, I found that <code>special</code> arguments for
setting <code>landscape</code> and <code>papersize</code> in TeX files for
DIN A3 landscape didn't work.  Ghostview cut off the right sides of the
drawings.  Nor did it work to call
<samp><span class="command">dvips -t landscape -t a3</span></samp>. 
This caused an error message which said that
<code>landscape</code> would be ignored.  When I called <samp><span class="command">dvips</span></samp>
with the <samp><span class="option">-t landscape</span></samp> option alone, it worked, and
Ghostview showed the entire drawing.

   <p>Another problem was Adobe Acrobat.  It would display the entire DIN A3
page, but not always in landscape format.  I was unable to find a way of
rotating the pages in Acrobat.  I finally found out, that if I included
even a single letter of text in a label, Acrobat would display the
document correctly.

<ul class="menu">
<li><a accesskey="1" href="Converting-EPS-Files.html#Converting-EPS-Files">Converting EPS Files</a>
<li><a accesskey="2" href="Command-Line-Arguments.html#Command-Line-Arguments">Command Line Arguments</a>
</ul>

   </body></html>

