#
# Every user's newsrc is checked by the newsrc-listgroups program
# and if it hasn't got too many groups in it, they will be fetched.
#
# The service should spit out a list of legal newsgroup names,
# and will always be invoked by something in group news.

reset
no-set-environment
suppress-args
ignore-fd 0

if ! glob calling-group news
	error Sorry (caller).
fi
if ! grep service-user-shell /etc/shells
	message Warning - newsrc-listgroups for user whose shell not in shells
	execute /bin/true
	quit
fi

execute /usr/local/lib/news/feed+read/newsrc-listgroups /etc/news/nntp-merge.conf
