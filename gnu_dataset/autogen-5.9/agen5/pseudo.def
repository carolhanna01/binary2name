/* -*- Mode: C -*- */

/*  pseudo.def
 *
 *  $Id: pseudo.def,v 4.4 2006/09/24 02:59:00 bkorb Exp $
 *
 *  Time-stamp:        "2006-09-23 19:50:50 bkorb"
 *  Last Committed:    $Date: 2006/09/24 02:59:00 $
 *
 *  AutoGen copyright 1992-2006 Bruce Korb
 *
 *  This defines the finite state transition table for parsing the
 *  pseudo-macro at the head of every template
 */
AutoGen Definitions fsm;

/* "method" is not defined -- produce a header only */

prefix = pm;

event = ed_mode;     /* the -*- mode marker */
event = marker;      /* a start or end macro mark */
event = end_pseudo;  /* newline found in end_mark state */

event = "autogen";   /* "autogen" */
event = template;    /* "template" */
event = suffix;      /* a string other than the above */
event = scheme;      /* a scheme expression to process */

state = st_mark;     /* start marker processed */
state = agen;        /* "autogen5" processed   */
state = templ;       /* "template" processed   */
state = end_mark;    /* end marker processed   */

ed-mode = '-*-';

/*
 *  No-op transition.  Applies to all states and does not change state.
 */
transition = { tst = '*';       tev = ed_mode;    ttype = skip_ed_mode; };
/*
 *  Disable the ed_mode transition in the end_mark state tho
 */
transition = { tst = end_mark;  tev = ed_mode;    ttype = invalid;   };

/*
 *  Meaningful transitions
 */
transition = { tst = init;      tev = marker;     next = st_mark;  };
transition = { tst = st_mark;   tev = "autogen";  next = agen;  ttype = noop; };
transition = { tst = agen;      tev = template;   next = templ; ttype = noop; };
transition = { tst = templ;     tev = suffix; };
transition = { tst = templ;     tev = scheme; };
transition = { tst = templ;     tev = marker;     next = end_mark; };
transition = { tst = end_mark;  tev = end_pseudo; next = done;  ttype = noop; };

/* pseudo.def ends here */
