#! /bin/sh
#
## Time-stamp:      "2006-09-16 12:49:11 bkorb"
## ident            $Id: stdopts.def,v 4.3 2006/09/16 19:58:55 bkorb Exp $

#  This is the standard set of options for testing option processing
#  It is expected to be dot

exec 5> $testname.def
cat >&5 <<- _EOF_

	AutoGen definitions options;

	config-header = 'config.h';
	prog-name  = "test_${testname}";
	prog-title = "Test AutoOpts for ${testname}";
	_EOF_

echo test_main $test_main
echo argument  $argument
echo long_opts $long_opts

test -n "${test_main}" && echo "test-main  = '${test_main}';" >&5
test -n "${argument}"  && echo "argument   = '${argument}';" >&5
test -n "${long_opts}" && echo "long-opts;" >&5

for flag
do
  case "$flag" in
  ?*:?* )
    arg=`echo $flag | sed 's/.*://'`
    flag=`echo $flag | sed 's/:.*//'`
    arg="    arg-type = string; arg_default = '$arg';"
    ;;

  ?*=[0-9]* )
    arg=`echo $flag | sed 's/.*=//'`
    flag=`echo $flag | sed 's/=.*//'`
    arg="    arg-type = number; arg_default = '$arg';"
    ;;

  ?*: )
    flag=`echo $flag | sed 's/://'`
    arg="    arg-type = string;"
    ;;

  ?*= )
    flag=`echo $flag | sed 's/=//'`
    arg="    arg-type = number;"
    ;;

  * )
    unset arg
    ;;
  esac

  cat <<-_EOF_
	flag = {
	    name = "$flag";
	    descrip = "The $flag option descrip";
	_EOF_

  ${use_flags} && {
    flag=`echo $flag | sed 's/\(.\).*/\1/'`
    echo "    value = '${flag}';"
  }
  test -n "${arg}" && echo "${arg}"
  echo "};"
  echo
done >&5

exec 5>&-

## Local Variables:
## Mode: shell-script
## indent-tabs-mode: nil
## sh-indentation: 2
## End:

# end of stdopts.def
