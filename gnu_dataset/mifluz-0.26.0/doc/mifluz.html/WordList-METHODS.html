<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 5.1, http://www.gnu.org/software/texinfo/ -->
<head>
<title>Mifluz: WordList METHODS</title>

<meta name="description" content="Mifluz: WordList METHODS">
<meta name="keywords" content="Mifluz: WordList METHODS">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="index.html#Top" rel="start" title="Top">
<link href="Concept-Index.html#Concept-Index" rel="index" title="Concept Index">
<link href="Concept-Index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="WordList.html#WordList" rel="up" title="WordList">
<link href="WordDict.html#WordDict" rel="next" title="WordDict">
<link href="WordList-CONFIGURATION.html#WordList-CONFIGURATION" rel="previous" title="WordList CONFIGURATION">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.indentedblock {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smallindentedblock {margin-left: 3.2em; font-size: smaller}
div.smalllisp {margin-left: 3.2em}
kbd {font-style:oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nocodebreak {white-space:nowrap}
span.nolinebreak {white-space:nowrap}
span.roman {font-family:serif; font-weight:normal}
span.sansserif {font-family:sans-serif; font-weight:normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="en" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">
<a name="WordList-METHODS"></a>
<div class="header">
<p>
Previous: <a href="WordList-CONFIGURATION.html#WordList-CONFIGURATION" accesskey="p" rel="previous">WordList CONFIGURATION</a>, Up: <a href="WordList.html#WordList" accesskey="u" rel="up">WordList</a> &nbsp; [<a href="Concept-Index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Concept-Index.html#Concept-Index" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<a name="WordList-METHODS-1"></a>
<h4 class="subsection">10.9.5 WordList METHODS</h4>

<dl compact="compact">
<dt>&lsquo;<samp>inline WordContext* GetContext()</samp>&rsquo;</dt>
<dd><p>Return a pointer to the WordContext object used to create
this instance.
</p></dd>
<dt>&lsquo;<samp>inline const WordContext* GetContext() const</samp>&rsquo;</dt>
<dd><p>Return a pointer to the WordContext object used to create
this instance as a const.
</p></dd>
<dt>&lsquo;<samp>virtual inline int Override(const WordReference&amp; wordRef)</samp>&rsquo;</dt>
<dd><p>Insert
<strong>wordRef
</strong> in index. If the
<code>Key()
</code> part of
the
<strong>wordRef
</strong> exists in the index, override it.
Returns OK on success, NOTOK on error.
</p></dd>
<dt>&lsquo;<samp>virtual int Exists(const WordReference&amp; wordRef)</samp>&rsquo;</dt>
<dd><p>Returns OK if
<strong>wordRef
</strong> exists in the index, NOTOK otherwise.
</p></dd>
<dt>&lsquo;<samp>inline int Exists(const String&amp; word)</samp>&rsquo;</dt>
<dd><p>Returns OK if
<strong>word
</strong> exists in the index, NOTOK otherwise.
</p></dd>
<dt>&lsquo;<samp>virtual int WalkDelete(const WordReference&amp; wordRef)</samp>&rsquo;</dt>
<dd><p>Delete all entries in the index whose key matches the
<code>Key()
</code> part of
<strong>wordRef
</strong>, using the
<code>Walk
</code>
method.
Returns the number of entries successfully deleted.
</p></dd>
<dt>&lsquo;<samp>virtual int Delete(const WordReference&amp; wordRef)</samp>&rsquo;</dt>
<dd><p>Delete the entry in the index that exactly matches the
<code>Key()
</code> part of
<strong>wordRef.
</strong>
Returns OK if deletion is successfull, NOTOK otherwise.
</p></dd>
<dt>&lsquo;<samp>virtual int Open(const String&amp; filename, int mode)</samp>&rsquo;</dt>
<dd><p>Open inverted index
<strong>filename.
</strong>
<strong>mode
</strong>
may be
<code>O_RDONLY
</code> or
<code>O_RDWR.
</code> If mode is
<code>O_RDWR
</code> it can be or&rsquo;ed with
<code>O_TRUNC
</code> to reset
the content of an existing inverted index.
Return OK on success, NOTOK otherwise.
</p></dd>
<dt>&lsquo;<samp>virtual int Close()</samp>&rsquo;</dt>
<dd><p>Close inverted index.
Return OK on success, NOTOK otherwise.
</p></dd>
<dt>&lsquo;<samp>virtual unsigned int Size() const</samp>&rsquo;</dt>
<dd><p>Return the size of the index in pages.
</p></dd>
<dt>&lsquo;<samp>virtual int Pagesize() const</samp>&rsquo;</dt>
<dd><p>Return the page size
</p></dd>
<dt>&lsquo;<samp>virtual WordDict *Dict()</samp>&rsquo;</dt>
<dd><p>Return a pointer to the inverted index dictionnary.
</p></dd>
<dt>&lsquo;<samp>const String&amp; Filename() const</samp>&rsquo;</dt>
<dd><p>Return the filename given to the last call to Open.
</p></dd>
<dt>&lsquo;<samp>int Flags() const</samp>&rsquo;</dt>
<dd><p>Return the mode given to the last call to Open.
</p></dd>
<dt>&lsquo;<samp>inline List *Find(const WordReference&amp; wordRef)</samp>&rsquo;</dt>
<dd><p>Returns the list of word occurrences exactly matching the
<code>Key()
</code> part of
<strong>wordRef.
</strong> The
<code>List
</code> returned
contains pointers to
<code>WordReference
</code> objects. It is
the responsibility of the caller to free the list. See List.h
header for usage.
</p></dd>
<dt>&lsquo;<samp>inline List *FindWord(const String&amp; word)</samp>&rsquo;</dt>
<dd><p>Returns the list of word occurrences exactly matching the
<strong>word.
</strong> The
<code>List
</code> returned
contains pointers to
<code>WordReference
</code> objects. It is
the responsibility of the caller to free the list. See List.h
header for usage.
</p></dd>
<dt>&lsquo;<samp>virtual List *operator [] (const WordReference&amp; wordRef)</samp>&rsquo;</dt>
<dd><p>Alias to the
<strong>Find
</strong> method.
</p></dd>
<dt>&lsquo;<samp>inline List *operator [] (const String&amp; word)</samp>&rsquo;</dt>
<dd><p>Alias to the
<strong>FindWord
</strong> method.
</p></dd>
<dt>&lsquo;<samp>virtual List *Prefix (const WordReference&amp; prefix)</samp>&rsquo;</dt>
<dd><p>Returns the list of word occurrences matching the
<code>Key()
</code>
part of
<strong>wordRef.
</strong> In the
<code>Key()
</code>, the string
(accessed with
<code>GetWord()
</code>) matches any string that begins
with it. The
<code>List
</code> returned contains pointers to
<code>WordReference
</code> objects. It is the responsibility of the
caller to free the list.
</p></dd>
<dt>&lsquo;<samp>inline List *Prefix (const String&amp; prefix)</samp>&rsquo;</dt>
<dd><p>Returns the list of word occurrences matching the
<strong>word.
</strong> In the
<code>Key()
</code>, the string (accessed with
<code>GetWord()
</code>) matches any string that begins with it. The
<code>List
</code> returned contains pointers to
<code>WordReference
</code>
objects. It is the responsibility of the caller to free the
list.
</p></dd>
<dt>&lsquo;<samp>virtual List *Words()</samp>&rsquo;</dt>
<dd><p>Returns a list of all unique words contained in the inverted
index. The
<code>List
</code> returned contains pointers to
<code>String
</code> objects. It is the responsibility of the caller
to free the list. See List.h header for usage.
</p></dd>
<dt>&lsquo;<samp>virtual List *WordRefs()</samp>&rsquo;</dt>
<dd><p>Returns a list of all entries contained in the
inverted index. The
<code>List
</code> returned contains pointers to
<code>WordReference
</code> objects. It is the responsibility of
the caller to free the list. See List.h header for usage.
</p></dd>
<dt>&lsquo;<samp>virtual WordCursor *Cursor(wordlist_walk_callback_t callback, Object *callback_data)</samp>&rsquo;</dt>
<dd><p>Create a cursor that searches all the occurrences in the
inverted index and call
<strong>ncallback
</strong> with
<strong>ncallback_data
</strong> for every match.
</p></dd>
<dt>&lsquo;<samp>virtual WordCursor *Cursor(const WordKey &amp;searchKey, int action = HTDIG_WORDLIST_WALKER)</samp>&rsquo;</dt>
<dd><p>Create a cursor that searches all the occurrences in the
inverted index and that match
<strong>nsearchKey.
</strong> If
<strong>naction
</strong> is set to HTDIG_WORDLIST_WALKER calls
<strong>searchKey.callback
</strong> with
<strong>searchKey.callback_data
</strong>
for every match. If
<strong>naction
</strong> is set to
HTDIG_WORDLIST_COLLECT push each match in
<strong>searchKey.collectRes
</strong>
data member as a
<strong>WordReference
</strong> object. It is the responsibility
of the caller to free the
<strong>searchKey.collectRes
</strong> list.
</p></dd>
<dt>&lsquo;<samp>virtual WordCursor *Cursor(const WordKey &amp;searchKey, wordlist_walk_callback_t callback, Object * callback_data)</samp>&rsquo;</dt>
<dd><p>Create a cursor that searches all the occurrences in the
inverted index and that match
<strong>nsearchKey
</strong> and calls
<strong>ncallback
</strong> with
<strong>ncallback_data
</strong> for every match.
</p></dd>
<dt>&lsquo;<samp>virtual WordKey Key(const String&amp; bufferin)</samp>&rsquo;</dt>
<dd><p>Create a WordKey object and return it. The
<strong>bufferin
</strong> argument
is used to initialize the key, as in the WordKey::Set method. 
The first component of
<strong>bufferin
</strong> must be a word that is translated
to the corresponding numerical id using the WordDict::Serial
method.
</p></dd>
<dt>&lsquo;<samp>virtual WordReference Word(const String&amp; bufferin, int exists = 0)</samp>&rsquo;</dt>
<dd><p>Create a WordReference object and return it. The
<strong>bufferin
</strong> argument is used to initialize the structure,
as in the WordReference::Set method.  The first component of
<strong>bufferin
</strong> must be a word that is translated to the
corresponding numerical id using the WordDict::Serial method.
If the
<strong>exists
</strong> argument is set to 1, the method 
WordDict::SerialExists is used instead, that is no serial is
assigned to the word if it does not already have one.
Before translation the word is normalized using the
WordType::Normalize method. The word is saved using the
WordReference::SetWord method.
</p></dd>
<dt>&lsquo;<samp>virtual WordReference WordExists(const String&amp; bufferin)</samp>&rsquo;</dt>
<dd><p>Alias for Word(bufferin, 1).
</p></dd>
<dt>&lsquo;<samp>virtual void BatchStart()</samp>&rsquo;</dt>
<dd><p>Accelerate bulk insertions in the inverted index. All 
insertion done with the
<strong>Override
</strong> method are batched
instead of being updating the inverted index immediately.
No update of the inverted index file is done before the
<strong>BatchEnd
</strong> method is called.
</p></dd>
<dt>&lsquo;<samp>virtual void BatchEnd()</samp>&rsquo;</dt>
<dd><p>Terminate a bulk insertion started with a call to the
<strong>BatchStart
</strong> method. When all insertions are done
the
<strong>AllRef
</strong> method is called to restore statistics.
</p></dd>
<dt>&lsquo;<samp>virtual int Noccurrence(const String&amp; key, unsigned int&amp; noccurrence) const</samp>&rsquo;</dt>
<dd><p>Return in
<strong>noccurrence
</strong> the number of occurrences of the
string contained in the
<code>GetWord()
</code> part of
<strong>key.
</strong>
Returns OK on success, NOTOK otherwise.
</p></dd>
<dt>&lsquo;<samp>virtual int Write(FILE* f)</samp>&rsquo;</dt>
<dd><p>Write on file descriptor
<strong>f
</strong> an ASCII description of the
index. Each line of the file contains a
<code>WordReference
</code>
ASCII description.
Return OK on success, NOTOK otherwise.
</p></dd>
<dt>&lsquo;<samp>virtual int WriteDict(FILE* f)</samp>&rsquo;</dt>
<dd><p>Write on file descriptor
<strong>f
</strong> the complete dictionnary 
with statistics.
Return OK on success, NOTOK otherwise.
</p></dd>
<dt>&lsquo;<samp>virtual int Read(FILE* f)</samp>&rsquo;</dt>
<dd><p>Read
<code>WordReference
</code> ASCII descriptions from
<strong>f
</strong>,
returns the number of inserted WordReference or &lt; 0 if an error
occurs. Invalid descriptions are ignored as well as empty
lines.
</p></dd>
</dl>


<hr>
<div class="header">
<p>
Previous: <a href="WordList-CONFIGURATION.html#WordList-CONFIGURATION" accesskey="p" rel="previous">WordList CONFIGURATION</a>, Up: <a href="WordList.html#WordList" accesskey="u" rel="up">WordList</a> &nbsp; [<a href="Concept-Index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Concept-Index.html#Concept-Index" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
