<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 5.1, http://www.gnu.org/software/texinfo/ -->
<head>
<title>Mifluz: WordCursor METHODS</title>

<meta name="description" content="Mifluz: WordCursor METHODS">
<meta name="keywords" content="Mifluz: WordCursor METHODS">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="index.html#Top" rel="start" title="Top">
<link href="Concept-Index.html#Concept-Index" rel="index" title="Concept Index">
<link href="Concept-Index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="WordCursor.html#WordCursor" rel="up" title="WordCursor">
<link href="WordCursorOne.html#WordCursorOne" rel="next" title="WordCursorOne">
<link href="WordCursor-DESCRIPTION.html#WordCursor-DESCRIPTION" rel="previous" title="WordCursor DESCRIPTION">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.indentedblock {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smallindentedblock {margin-left: 3.2em; font-size: smaller}
div.smalllisp {margin-left: 3.2em}
kbd {font-style:oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nocodebreak {white-space:nowrap}
span.nolinebreak {white-space:nowrap}
span.roman {font-family:serif; font-weight:normal}
span.sansserif {font-family:sans-serif; font-weight:normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="en" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">
<a name="WordCursor-METHODS"></a>
<div class="header">
<p>
Previous: <a href="WordCursor-DESCRIPTION.html#WordCursor-DESCRIPTION" accesskey="p" rel="previous">WordCursor DESCRIPTION</a>, Up: <a href="WordCursor.html#WordCursor" accesskey="u" rel="up">WordCursor</a> &nbsp; [<a href="Concept-Index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Concept-Index.html#Concept-Index" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<a name="WordCursor-METHODS-1"></a>
<h4 class="subsection">10.19.4 WordCursor METHODS</h4>

<dl compact="compact">
<dt>&lsquo;<samp>virtual void Clear() = 0</samp>&rsquo;</dt>
<dd><p>Clear all data in object, set
<strong>GetResult()
</strong> data to NULL but
do not delete it (the application is responsible for that).
</p></dd>
<dt>&lsquo;<samp>virtual inline int IsA() const</samp>&rsquo;</dt>
<dd><p>Returns the type of the object. May be overloaded by
derived classes to differentiate them at runtime.
Returns WORD_CURSOR.
</p></dd>
<dt>&lsquo;<samp>virtual inline int Optimize()</samp>&rsquo;</dt>
<dd><p>Optimize the cursor before starting a Walk.
Returns OK on success, NOTOK otherwise.
</p></dd>
<dt>&lsquo;<samp>virtual int ContextSave(String&amp; buffer) const = 0</samp>&rsquo;</dt>
<dd><p>Save in
<strong>buffer
</strong> all the information necessary to resume
the walk at the point it left. The ASCII representation of the
last key found (GetFound()) is written in
<strong>buffer
</strong> using the
WordKey::Get method.
</p></dd>
<dt>&lsquo;<samp>virtual int ContextRestore(const String&amp; buffer) = 0</samp>&rsquo;</dt>
<dd><p>Restore from buffer all the information necessary to 
resume the walk at the point it left. The
<strong>buffer
</strong> is expected
to contain an ASCII representation of a WordKey (see WordKey::Set
method). A
<strong>Seek
</strong> is done on the key and the object is prepared
to jump to the next occurrence when
<strong>WalkNext
</strong> is called (the
cursor_get_flags is set to
<code>DB_NEXT.
</code>
</p></dd>
<dt>&lsquo;<samp>virtual int Walk() = 0</samp>&rsquo;</dt>
<dd><p>Walk and collect data from the index. 
Returns OK on success, NOTOK otherwise.
</p></dd>
<dt>&lsquo;<samp>virtual int WalkInit() = 0</samp>&rsquo;</dt>
<dd><p>Must be called before other Walk methods are used.
Fill internal state according to input parameters 
and move before the first matching entry.
Returns OK on success, NOTOK otherwise.
</p></dd>
<dt>&lsquo;<samp>virtual int WalkRewind() = 0</samp>&rsquo;</dt>
<dd><p>Move before the first index matching entry.
Returns OK on success, NOTOK otherwise.
</p></dd>
<dt>&lsquo;<samp>virtual int WalkNext() = 0</samp>&rsquo;</dt>
<dd><p>Move to the next matching entry.  At end of list, WORD_WALK_ATEND
is returned.  Returns OK on success, NOTOK otherwise. When OK
is returned, the GetFound() method returns the matched entry.
When WORD_WALK_ATEND is returned, the GetFound() method returns
an empty object if the end of the index was reached or the match
that was found and that is greated than the specified search
criterion.
</p></dd>
<dt>&lsquo;<samp>virtual int WalkNextStep() = 0</samp>&rsquo;</dt>
<dd><p>Advance the cursor one step. The entry pointed to by the cursor may
or may not match the requirements.  Returns OK if entry pointed
by cursor matches requirements.  Returns NOTOK on
failure. Returns WORD_WALK_NOMATCH_FAILED if the current entry
does not match requirements, it&rsquo;s safe to call WalkNextStep again
until either OK or NOTOK is returned.
</p></dd>
<dt>&lsquo;<samp>virtual int WalkNextExclude(const WordKey&amp; key)</samp>&rsquo;</dt>
<dd><p>Return 0 if this key must not be returned by WalkNext as a valid
match. The WalkNextStep method calls this virtual method immediately
after jumping to the next entry in the database. This may be used,
for instance, to skip entries that were selected by a previous 
search.
</p></dd>
<dt>&lsquo;<samp>virtual int WalkFinish() = 0</samp>&rsquo;</dt>
<dd><p>Terminate Walk, free allocated resources.
Returns OK on success, NOTOK otherwise.
</p></dd>
<dt>&lsquo;<samp>virtual int Seek(const WordKey&amp; patch) = 0</samp>&rsquo;</dt>
<dd><p>Move before the inverted index position specified in
<strong>patch.
</strong>
May only be called after a successfull call to the
<code>WalkNext
</code>
or
<code>WalkNextStep
</code>method.
Copy defined fields from
<strong>patch
</strong> into a copy of the
<code>found
</code> data member and 
initialize internal state so that
<code>WalkNext
</code> jumps to
this key next time it&rsquo;s called (cursor_get_flag set to DB_SET_RANGE).
Returns OK if successfull, NOTOK otherwise.
</p></dd>
<dt>&lsquo;<samp>virtual inline int IsAtEnd() const</samp>&rsquo;</dt>
<dd><p>Returns true if cursor is positioned after the last possible
match, false otherwise.
</p></dd>
<dt>&lsquo;<samp>virtual inline int IsNoMatch() const</samp>&rsquo;</dt>
<dd><p>Returns true if cursor hit a value that does not match search criterion.
</p></dd>
<dt>&lsquo;<samp>inline WordKey&amp; GetSearch()</samp>&rsquo;</dt>
<dd><p>Returns the search criterion.
</p></dd>
<dt>&lsquo;<samp>inline int GetAction() const</samp>&rsquo;</dt>
<dd><p>Returns the type of action when a matching entry
is found.
</p></dd>
<dt>&lsquo;<samp>inline List *GetResults()</samp>&rsquo;</dt>
<dd><p>Returns the list of WordReference found. The application
is responsible for deallocation of the list. If the
<strong>action
</strong>
input flag bit HTDIG_WORDLIST_COLLECTOR is not set, return a NULL
pointer.
</p></dd>
<dt>&lsquo;<samp>inline List *GetTraces()</samp>&rsquo;</dt>
<dd><p>For debugging purposes. Returns the list of WordReference hit 
during the search
process. Some of them match the searched key, some don&rsquo;t.
The application is responsible for deallocation of the list.
</p></dd>
<dt>&lsquo;<samp>inline void SetTraces(List* traceRes_arg)</samp>&rsquo;</dt>
<dd><p>For debugging purposes. Set the list of WordReference hit
during the search process.
</p></dd>
<dt>&lsquo;<samp>inline const WordReference&amp; GetFound()</samp>&rsquo;</dt>
<dd><p>Returns the last entry hit by the search. Only contains
a valid value if the last
<code>WalkNext
</code> or
<code>WalkNextStep
</code>
call was successfull (i.e. returned OK).
</p></dd>
<dt>&lsquo;<samp>inline int GetStatus() const</samp>&rsquo;</dt>
<dd><p>Returns the status of the cursor which may be 
OK or WORD_WALK_ATEND.
</p></dd>
<dt>&lsquo;<samp>virtual int Get(String&amp; bufferout) const = 0</samp>&rsquo;</dt>
<dd><p>Convert the whole structure to an ASCII string description.
Returns OK if successfull, NOTOK otherwise.
</p></dd>
<dt>&lsquo;<samp>inline String Get() const</samp>&rsquo;</dt>
<dd><p>Convert the whole structure to an ASCII string description
and return it.
</p></dd>
<dt>&lsquo;<samp>virtual int Initialize(WordList *nwords, const WordKey &amp;nsearchKey, wordlist_walk_callback_t ncallback, Object * ncallback_data, int naction) = 0</samp>&rsquo;</dt>
<dd><p>Protected method. Derived classes should use this function to initialize
the object if they do not call a WordCursor constructor in their own
constructutor. Initialization may occur after the object is created
and must occur before a
<strong>Walk*
</strong> method is called. See the 
DESCRIPTION section for the semantics of the arguments.
Return OK on success, NOTOK on error.
</p></dd>
<dt>&lsquo;<samp>WordKey searchKey</samp>&rsquo;</dt>
<dd><p>Input data. The key to be searched, see DESCRIPTION for more information.
</p></dd>
<dt>&lsquo;<samp>WordReference found</samp>&rsquo;</dt>
<dd><p>Output data. Last match found. Use GetFound() to retrieve it.
</p></dd>
<dt>&lsquo;<samp>int status</samp>&rsquo;</dt>
<dd><p>Output data. WORD_WALK_ATEND if cursor is past last match, 
OK otherwise. Use GetStatus() to retrieve it.
</p></dd>
<dt>&lsquo;<samp>WordList *words</samp>&rsquo;</dt>
<dd><p>The inverted index used by this cursor.
</p></dd>
</dl>


<hr>
<div class="header">
<p>
Previous: <a href="WordCursor-DESCRIPTION.html#WordCursor-DESCRIPTION" accesskey="p" rel="previous">WordCursor DESCRIPTION</a>, Up: <a href="WordCursor.html#WordCursor" accesskey="u" rel="up">WordCursor</a> &nbsp; [<a href="Concept-Index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Concept-Index.html#Concept-Index" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
