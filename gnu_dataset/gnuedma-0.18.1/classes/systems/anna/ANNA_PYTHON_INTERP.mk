#
# Makefile for EDMA class ANNA_PYTHON_INTERP
# Generated by EDMA IDF Wizard Gnomized 0.1
#
CC=gcc
CCFLAGS=`edma-config --cflags-class`
LIBS=`edma-config --libs-class` 
#LIBS_PYTHON=-L /usr/lib/python1.5/config -lpython1.5 -lm -lpthread -ldl -Xlinker -export-dynamic
#LIBS_PYTHON=-L /usr/lib/python1.5/config -lpython2.3 -lm -lpthread -ldl -Xlinker -export-dynamic
LIBS_PYTHON=-lpython2.5 -lm -lpthread -ldl -Xlinker -export-dynamic

NAMESPACE = siu/system
TARGET_DIR = `edma-config --dir-impl`/edma/${NAMESPACE}
IDF_DIR = `edma-config --dir-int`/${NAMESPACE}

libANNA_PYTHON_INTERP.so.0.0.0: temp.o 
	$(CC) -nostartfiles -shared -Wl,-soname,libANNA_PYTHON_INTERP.so.0.0.0 -o $@	temp.o $(LIBS) $(LIBS_PYTHON)

temp.o: ANNA_PYTHON_INTERP_imp.c 
	$(CC)  $(CCFLAGS)  $< -o $@ 


.PHONY: install
install:
	mkdir -p ${TARGET_DIR}
	mkdir -p ${IDF_DIR}
	cp -f libANNA_PYTHON_INTERP.so.0.0.0 ${TARGET_DIR}/.
	cp -f ANNA_PYTHON_INTERP.idf ${IDF_DIR}/.
	ln -s ${TARGET_DIR}/libANNA_PYTHON_INTERP.so.0.0.0 ${TARGET_DIR}/libANNA_PYTHON_INTERP.so.0
	ln -s ${TARGET_DIR}/libANNA_PYTHON_INTERP.so.0.0.0 ${TARGET_DIR}/libANNA_PYTHON_INTERP.so
