#!/bin/sh

badusage () { echo >&2 \
'usage: sauce-setuserpolicy [:<subpolicy>] [<filename>|-]
default filename is ~/.sauce-policy[:<subpolicy]'; exit 1; }

set -e

case "$1" in
:*)	subpolicy="$1"; shift ;;
*)	subpolicy='' ;;
esac

case "$#.$1" in
0.)	exec <$HOME/.sauce-policy"$subpolicy" ;;
1.-)	;;
1.*)	exec <"$1" ;;
*)	badusage ;;
esac

exec userv -DSUBPOLICY="$subpolicy" mail sauce-rcptpolicy
