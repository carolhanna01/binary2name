#!/bin/sh

badusage () { echo >&2 \
'usage: sauce-setsyspolicy [:<subpolicy>] [<filename>|-]
default filename is ${@@@config_dir@@@}/policy[:<subpolicy>]'; exit 1; }

set -e

case "$1" in
:*)	policy="$1"; subpolicy="$1"; shift ;;
*)	policy=:; subpolicy="" ;;
esac

case "$#.$1" in
0.)	exec <${@@@config_dir@@@}/policy"$subpolicy" ;;
1.-)	;;
1.*)	exec <"$1" ;;
*)	badusage ;;
esac

exec ${@@@share_dir@@@}/rcpt-policy "$policy"
